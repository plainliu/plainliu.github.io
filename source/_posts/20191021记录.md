---
title: 20190909记录
date: 2019-10-21 10:43:00
tags:
- 记录
---

- [x] 打包工具ios转格式区分alpha通道无效，转RGB（新老工具都转）
- [ ] 打包工具整理检查alpha通道无效的代码
- [ ] 老打包工具的bug整理代码
- [ ] 写nsight使用记录，如何看shader问题
- [ ] 每日测试子模块的单元测试完善
- [ ] 每日测试单元测试出现网络验证失败
- [x] 添加默认操作步骤
- [x] 录制后自动运行一次
- [ ] 自动运行使用指示鼠标位置模式（？）
- [ ] 报错的单元测试，继续report表示通过

# 1021

提交闪黑片问题

## 添加录制后运行

主进程管理录制和回放

子进程两个：录制、回放

子模块提供录制功能，录制的子进程使用录制子模块

两个控制接口：

- 是否连续录制
- 是否需要自动测试

## 录制报错

1. 修改modulecommon.lua

   只允许有效一次

2. 对于实际需要的工作路径（手动跑例子的引擎位置）不在入口lua文件所在的地址，加载资源有问题，如何处理

   - 修改例子，在外层添加一个入口文件

   - 修改工具，指定到WT文件夹的下一级目录

     这个的问题是有个别例子的工作路径不是外层文件夹，比如`14520-添加光束功能`

     ![1571651619063](C:\Users\admin\AppData\Roaming\Typora\typora-user-images\1571651619063.png)

     工作路径在内层

3. 讨论添加默认操作步骤

   - 添加的必要性（扩充当前的测试用例）

   - 对QA的影响

     不测试的例子需要加到屏蔽列表里

   - 默认的操作步骤主要考虑的是有只打印log的例子，就可以不录制了

   - 对于没有及时录制的，可以提前加入测试队列

   - 如果加默认操作步骤，怎样的步骤好一点？需不需要截图，什么时间截图

4. 

- 

## 其他

重构和模块化：

模块化减少了冗余代码，显示出保障的重要性，因为一个功能使用到已有的模块，对已有模块的修改

偶尔是有负面状态的，只是不善言谈罢了，不是没有思想。

再怎么我们是技术人员，外围倒显得更专业了，指点指点，感觉优异。不敬畏规则，当做谈资。越职决策。

社会青年罢。加班游戏，外带声音。

我做不到如此，羡慕能如此不畏空言，却也排斥如此自作人才。

时刻谨记，勿以为不显，实则都在台上。功夫不到家呀。

几件事吧，告之之事，不出二日，大多人已知；他人加班，出声游戏；喜指点他人。

# 1022

默认操作步骤的添加

报告那些没有录制

## 测试

- [x] 不稳定打印，打印时间等（改例子）
  - 1-loader测试/loading2
  - 12524-卡通渲染功能开发/code
  - 14948-修改parent后关闭引擎时发生崩溃
- [x] 异步加载，不稳定例子（加屏蔽）
  - 13094-寻路问题/code
  - **14040-整合卡通渲染功能/code**
  - **14458-指数型高度雾/code**
  - **15050-优化Mesh的内存占用/code**
- [x] rdsetting等文件不用测试（加屏蔽）
  - sceneRDSetting.lua
  - cameraControl.lua
- [ ] 有问题的例子
  - 12524-卡通渲染功能开发/code（openGL报错）
- [ ] 与场景同名的lua文件（不必测试）
- [ ] 生成的目录结构（调整生成文件夹，没有树，一个WT下多个code文件夹则只有一个）
- [ ] 没有操作步骤换成打印，不要生成error，最后在error中不需要算到出错例子，因为数量太多，影响查看问题例子

**恢复每日测试流程**

## 资源检查工具-检查特效

- [x] 检查单元测试全通过

### 添加特效粒子数的统计

每秒所有发射器发射的粒子数

### 区分发射模型的特效

### 打印自定义特效

添加新的分类

打印不合法/自定义特效

### 自定义特效转换

1. 自定义可以加man
2. tag文件
3. 溶解特效做法不一样

## 测试

模块单元测试的网络验证出问题，则不copylib，从16上拷贝当天的引擎

- 保证和引擎功能同步
- 防止验证失败的问题发生

备注：

看对比结果、跑单元测试看Resource_Checker和

# 1023

添加默认的操作步骤，扩充测试用例，测试两次，处理部分问题例子

资源检查工具，添加特效粒子数标准；自定义特效的检查



接下来

- [ ] 整理测试结果、修改测试工具，再次测试

- [x] 整理资源检查工具，修改讨论结果（粒子数放到最前面，添加两个标准）

- [x] 自定义特效转换脚本

- [x] BCP花片问题验证

- [x] 打包的自动化添加lib库的文件夹

- [ ] 几个编辑器拷贝postlua的删除

- [ ] 资源检查工具的config不太好，子模块于大模块不独立，config去设置子模块参数而不是定义子模块参数

  

## jre和jdk环境变量设置

原来的1.8

javahome：1.8的jdk文件夹：C:\Program Files\Java\jdk1.8.0_121

path：%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin

calsspath：%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;

改成1.7 32位

javahome：C:\Program Files (x86)\Java\jdk1.7.0_67

path：%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;

calsspath：.;%JAVA_HOME%\lib;%JAVA_HOME%\lib\tools.jar;

## 测试

**getPathName**的问题

![1571820295943](C:\Users\admin\AppData\Roaming\Typora\typora-user-images\1571820295943.png)

![1571820500012](C:\Users\admin\AppData\Roaming\Typora\typora-user-images\1571820500012.png)

检查录制的保存问题

使用的是true



- 使sampleTest单元测试通过
  - 先修改AutoCapture引起的改动
  - 添加单元测试
  - 添加本次修改测试

测试UnitTest没了的原因

**有报错**

## 转换自定义特效

写脚本转换

记录问题：

输入：项目路径；项目路径和检查的特效list

输出：转换特效

过程：



虽然很多时候代码逻辑和效率能同时提升，难受的是有时逻辑和效率不可兼得。

# 1024

- [x] 自动化打包添加Android工程拷贝
- [ ] 检查今天的自动化结果
- [ ] 尝试解决系统弹窗的问题

## 自动化

问题：

出现系统面板（如颜色面板）后，等不到回应，阻塞状态。

老的测试没有问题是因为杀死了

看看能不能改sample 改成直接给值 或者录制的时候不要打开选颜色



## 自定义特效转换

自定义特效分类：

1. 自定义点光特效

   自定义代码中可获得的参数

   - light 判断是否是点光特效
   - power

2. 自定义地表特效

   - terrain
   - texture
   - material：material

   溶解：

   - isdissolve
   - resdissolve
   - dissolvesize
   - dissolvecolor1
   - dissolvecolor2

3. 自定义模型特效

   - mesh：resMesh
   - skl：resSkeleton
   - san/man：resAnimation
   - loop：resAnimationLoop

   溶解：



- tag
  - tag取消

问题记录：

1. 自定义代码中有写resMaterial的属于哪一种
2. 是自定义特效，有material属性的情况下，是否为优先使用material属性，再从自定义代码中赋予溶解特性
3. emitter.pfxType变成普通特效：_Particle.
4. 材质另存为起名字
5. 溶解特效如何区分地表和模型



测试资源：

- 普通特效

  普通地表1

  普通模型

- 自定义点光特效

- 自定义地表特效

  - 图片

    溶解/不溶解

  - 材质

    溶解/不溶解

- 自定义模型特效

  - msh/skn
  - man/san
  - skl
  - tag

  s

  - 溶解/不溶解



# 1025

- [ ] 处理自动化结果
- [ ] 测试转换自定义特效的脚本

自动化：

14948http://fancy3d.wt.fancyguo.com/task/show/15475



测试转换脚本：

自定义特效使用已有材质，，修改特效上的材质属性，保存特效时是否保存材质属性、是否修改原来的材质文件



生成log：

恢复环境：

1. delpath
2. 重置currentFolder
3. 重置打印函数等

# 1026

## 自动化测试

### 目前情况

**检查代码**：

没有问题

**检查模块单元测试**：

如果有报错，报告结果不准确

**检查sampleWT**：

问题：

1. 不稳定例子
2. 有系统弹窗测试被阻塞

检查资源：

1. 每天的结果中有error.txt有无的问题

### 待完成

###  问题



屏蔽老例子测试工具

转换材质的问题





## Nsight使用



待办：

看保险配置

转换资金方案

是否去天津

卖掉鹤姑！！！趁着还值钱，换相机！！！

备注：

anaconda

