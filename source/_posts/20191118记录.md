---
title: 20191118记录
date: 2019-11-18 10:07:04
tags:
- 记录
---

**工作计划**

- [ ] 烘焙小作文
- [ ] 调整自动化测试的内容
- [ ] 检查特效的工具改进

**学习**

- [ ] 软渲染！！！
- [ ] 学习GL

# 1118

合并分支到主干

小作文

检查特效的工具改进

出fs引擎并提交

## 检查特效

**特效的D值检查**

1. P值统计中去掉mesh的P值
2. D值划分（16D < 1%, 8D < 4%,  4D < 95%）

`framePolygonCount - staticMeshPolygonCount`

去掉



统计P值应该关掉

```
_sys.showStat = false
_sys.showVersion = false
```

# 1119

统计数据

没有update到最新（svn工具）



检查特效的讨论

小作文提交

自动化测试分支复制出来

# 1120

- [x] 整理昨天晚上的测试结果
- [x] 分支测试添加新的机器人
- [x] 小作文添加老烘焙介绍
- [ ] 提交小作文
- [ ] 检查特效 查看检查不正确的问题
- [ ] 修改自动测试结果新老文件夹名
- [ ] 添加不稳定例子



## 检查特效

### 小例子

播放单个特效

关闭post和黄字

打印PD



1. 0个D
2. P统计不正确



**问题**

1. 编辑器中比例子中的统计D多
2. 编辑器使用的是selectedDrawCount，统计为0
3. frame的统计比partcle的多





编辑器中的D中没有自定义的

普通地表特效的D加减无变化



用pp:**play**(ptc)的方式DP变成两倍



先看地形的没有统计上

再看编辑器中比例子中多的原因



只有一个普通地表特效，第一次播放为2， 第二次播放为1



# 1021

问题1：decal的没有统计到particle的D中

编辑器比单独跑多D

原因是单独加载合并较多，编辑器中部分未合并

1. 合并DECAL
2. 合并其他发射器



方案：

看引擎中合并非decal发射器的位置

看合并的条件是什么

编辑器中的什么因素导致了没能合并



编辑器表现不稳定的现象

11，13，15



先拿例子特效

- 用工具跑结果

  使用frame的DP

  给特效加地表

  降序排列

- 编辑器看D值

- 对比表现，使得大部分正确



问题记录：

- 地表特效可能编辑器中没有统计到
- 检查工具中D值合并次数多，D值小
- 有一个没统计到的片……



问题：

| D值检查问题                   | 检查工具                   | 编辑器                              |
| ----------------------------- | -------------------------- | ----------------------------------- |
| 合并情况不一样                |                            | decal特效未合并，D值大              |
| 、、                          |                            | 其他特效存在未合并，D值大           |
| 自定义地表溶解特效            | 使用frameD统计没问题       | 未统计（selected未统计到）          |
| decalD没统计到pfx/selectedD中 | 使用ParticleD统计没有decal | 编辑器中selected拿到了D（原因未知） |
| 编辑器统计到的D不稳定         |                            | 例子中出现了11，13，15不稳定的情况  |
| 部分特效D值不一样             | 检查工具D少（原因未知）    |                                     |
| frameD中selected统计两次      |                            |                                     |



# 1122

提交软著

自动化测试问题，valied error/单元测试不通过



需要定下来规则，单元测试中谁生成的文件，谁删除



打包工具转换特效

- 换到打包工具中作为一个函数
- 默认转换
- 加到needed的分组
- 项目资源中加载

addPackNew

addFileNew





doUnitTestFolder不准确

# 1123

- [x] 给飞哥更新检查工具
- [x] 打包工具加转换特效过程
- [ ] 检查自动化结果，写WT



打包工具合并到主干

修改文件夹的单元测试对比

给飞哥的检查工具修改

打包job



打包工具点中断是否有问题（已经生成了快照，下一次运行的增删改对比的是失败的这一次，资源发生了变化）





问题记录：

命名的问题，global的命名

![1574510210516](C:\Users\admin\AppData\Roaming\Typora\typora-user-images\1574510210516.png)

拆分后，如果是kog.lua负责目录对应关系，那替换文件的拷贝也要移动到exe运行阶段来进行

grouplist的获取