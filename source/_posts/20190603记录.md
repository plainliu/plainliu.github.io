# 备忘

- 草套索调整

- list抽象，ListNode-mapOne
- 看引擎文档，写例子

### ui

```lua
mylist = list^{
	-- w, h, ...
    node = listnode^{
        -- etc
    }
}
```

### mapOne

```lua
-- TRegister.init
ut.LISTNODE = function(u, key, fget, fset)
    assert(u.node)

    u.node.click = function(self)
        verbose('[Reg][nodeclick]')
        fset()
    end
end
```



自动测试加动画资源检查和场景资源检查

- 自动测试的相关备忘
  1. 资源名称
  2. 模型截图黑屏
  3. 选择跑哪一类文件
  4. log中可以对应看出哪个资源报错出问题

- 其他



# 0603

> 调整资源测试，可以测试多个项目的资源（问题：保存截图的文件夹名称命名）
>
> 改测模型的摄像机位置
>
> 添加场景的测试进去

today：分析场景中地形大小，确定look点

资源本身：缺失问题

判断资源路径是否有效



地形大小：

2000，4000，2400，1600，6400 *4800，10000，800，3200，600，1500，1200，7600，5600 *2000

确定look点数组，对每个look点加摄像机

没有查根目录





## 合并模型后刷新问题

刷新后合成一个，缩放大小与默认相同

分离后ok



其他信息？

newMesh()

_Mesh.new()

筛选合并刷新

分离刷新



先选2，合并，刷新，再加选一个3，合并刷新，石头合成一个（有次三个人合成了一个）

石头点分离，消失

# 0604

> 资源测试的用分块的方法，效果不如意，被雾挡住，和天空盒遮挡严重的场景不能达到预期
>
> 合并模型点击刷新按钮变成单个模型的问题
>
> Today：合并刷新多次后存在变成单个模型的情形；场景资源测试拿场景中的摄像机做

最后点石头分离，是因为合并的模型的 #transforms = 0

选2npc，点击多次刷新，崩溃





1. 提交一版自动测试的内容

   文件夹名字，if folderExit() then end

2. 刷新按钮的bug

   提WT，引擎

3. 筛选的UI加功能

# 0605

> 查刷新合并的模型合成一个的问题
>
> 筛选模型

drawMesh之前的重复代码

get，set的参数要不要key

Register中true false选择设置

ui命名



**pickFlag**

根据Flag 来 pick Node， 正常显示的Flag值是4，8

即在场景中pick的时候用Flag4,8

其他数值被筛选



getNodes可以拿到所有Node

mesh中用Node的Flag值

如果== 16，即筛选掉的，不渲染出来

而筛选点击设置一次所有的Flag



左边List中不显示筛选掉的node

- show = false
- 更新中删掉UI，从哪里拿列表中的Node



clearChooseMeshes中调用了resetMeshGroups，也调用了meshList的unSelectAll，在不选的事件中又调用了resetMeshGroups，两次调用？

筛选之后刷新按钮刷新所有模型资源or在列表中的资源

pickFlag原来用来做什么，判断筛选会不会有冲突

取值16作为被筛选的，01111，1111为选中，1-15

Q：编辑器中100的值暂时不知道干啥用的

100二进制1100100，与15（1111）与的结果为真（暂时OK）



问题：

pickFlag的值2，不仅在scene.lua中遇到，还有在函数调用参数中遇到，getLocation()

# 0606

> 筛选功能

任务：

- 提交一版加pickFlag常量值的编辑器代码
- 提交筛选功能
- 提交按钮刷新
- 提交自动测试

问题：

1. 选中模型，改变水面反射，执行mapone返回的函数，调用了get，所有的都会取消选中

但是如果选中的在这次筛选之后还是显示的，那么按理讲应该仍然选中的状态

2. pickFlag的常量值在dofile之后才有

删除define有问题，不能再其他文件中调用

草刷不上去了（草的pickFlag = 0）

pick如果没有pickFlag参数，那么默认全选，但是草选不中。草没有选中的相关事件。

新建一颗草，返回的node的pickFlag = 0, 但是保存重新打开后，addnode会使它等于8

pickFlag=100的值





不同路径下，同名资源，

# pickFlag

通过一个参数进行匹配多选

# 捋清楚延迟一帧截图与代码内容的关系

# 延迟

