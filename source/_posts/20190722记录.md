# 0722

## 地表纹理贴图接缝的问题

讨论问题

结果：

- 从在每一个地形tile块上做贴图uv缩放的计算，转换成在整个地表上 计算uv缩放
- 在世界坐标系中计算每一个地表块起始位置对应的uv坐标

![1563776307408](C:\Users\admin\AppData\Roaming\Typora\typora-user-images\1563776307408.png)

步骤：

1. 和项目沟通
   - 纹理贴图整数是否满足需求（涉及0~1的小数和大于1的小数两种情况）
   - 多层uv贴图uv系数不一样的效果
2. 提需求WT
3. 实现新的贴图方式
4. 去掉地表uv缩放

## 录制和模拟运行的接口

1. 是否需要加左中右键的记录

2. 加鼠标中键滚动的记录和模拟运行

3. 参数问题

   key用来记录KeyDown的keyvalue，到3d后也记录左中右键，

   问题：

   - 在MouseMove 的时候用不到第二个参数，这样在模拟运行时，需要在lua中给MouseMove的步骤增加一个参数
   - 在MouseWheel中只需要一个 _long , 这里只有一个 dword和point

   ![1563777163928](C:\Users\admin\AppData\Roaming\Typora\typora-user-images\1563777163928.png)

![1563777861831](C:\Users\admin\AppData\Roaming\Typora\typora-user-images\1563777861831.png)

解决方案：

- MouseMove参数的问题，可以将key定义为 long，







分享：

记录文档的语言或工具，方便更新文档

当前pdf的不足之处：

- 修改不方便，如果之后其他人修改了这个模块，修改文档则需要重新写一遍再导出为pdf
- 

# 0723

场景材质展示模块：

**UI：**

细节面板，list，点击事件

**接口：**

1. getMeshs( mtl ) 获得使用到指定材质的模型
2. getAllMaterials( ) 统计所有材质，次数和材质名
3. getMaterials( mesh ) 拿到模型所用的材质
4. pickMesh( ) 鼠标点击pick 场景中的 mesh，执行getMaterials( mesh ) 
5. itemClick( ) 点击list中的一项材质，执行getMeshs( mtl )，并高亮得到的meshs

问题：

1. 有材质，材质没有resname的情况需不需要计入
2. 在pick单个模型的情况下，列表的点击事件高亮的当前模型的选中材质

# 0725

1. list展示到右侧
2. 垂直视角
3. 关掉所有雾
4. 画阿尔法片
5. 加片开关
6. 快捷键展示list
7. 表排序
8. 选中的node高亮？（暂时画包围盒）
9. 对没有resname的材质处理（暂时用material.diffuseMap.resname统计）

# 0726

【需求】

**基础功能：**

1. 加载场景，展示场景的所有材质（使用次数，材质名）
2. 选择展示列表中的材质，高亮对应的模型
3. pick场景中的模型，展示该模型使用到的材质
4. 没pick到模型，展示所有材质
5. 根据模型使用到的材质数目，画颜色深度不同的片

**具体功能：**

1. 快捷键切换到顶视角，可以回到原视角
2. 点击材质，依次切换视角到使用到该材质的模型位置
3. 



【使用】

**添加检查的场景：**

1. 打开exe同目录的code.lua，修改工作路径

2. 添加要检查的场景

   ![1564108509404](C:\Users\admin\AppData\Roaming\Typora\typora-user-images\1564108509404.png)

**运行：**

点击exe，启动

**操作：**

1. 启动后，右侧列表默认展示场景中的所有材质

2. 场景中鼠标点击

   - 如果点击到模型，该模型画包围盒，并在列表中展示它所使用到的材质
   - 如果没点击到模型，则展示所有材质

3. 点击列表中的材质

   - 如果展示的是场景中所有材质，高亮场景中所有使用到该材质的子模型
   - 如果展示的是单个模型的材质，高亮单个模型使用到该材质的子模型（回车后高亮所有）

4. 快捷键

   - 回车：展示场景中所有用到被点击材质的子模型，左右键摄像机切到对应模型位置

   - D：画场景中所有模型的材质统计颜色片（颜色越深，该模型使用到的材质数目越多）

     取消颜色片：再次按D

   - W：切换线框模式；取消：再次按W

   - L：显示展示面板（关闭展示面板后，按L再次展示）

   - Ctrl + T：摄像机位置切到顶视角

5. 