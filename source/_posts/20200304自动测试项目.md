
# 项目自动测试
http://fwp.fancyguo.com/#/project/versions/task/info?versionId=74&accessTime=1583298119997&id=18643
## 分析
### 项目方面：
- 写testcase
  1. 像在client目录下运行
  2. 通过assert测试
- 本地调试单个用例通过

### 模块自动测试工具方面：

**整体测试流程**

- 输入：项目本地地址
- 输出：整体测试结果（类似pass/all）
- 运行：跑所有的testcase，返回测试结果

**单个testcase测试**

```lua
assert()
```

- 提供测试框架

  assert()的断言过程中进行统计，最后给出报告

- 执行测试方式（待定）

## 执行

功能区分：

1. assert断言/统计

   - 单个测试用例内部测试使用的功能

   - 用于生成单个测试用例的测试结果

2. 运行测试的接口（runTestCase）

   点击/运行单元测试前后的处理

   - 前：初始化统计数据；设置路径到client
   - 中：dofile测试用例

   - 后：报告测试结果

3. 整体测试

   Master-Slave

   - Master

     输入：client路径，test路径

     - 遍历test路径，生成测试列表
     - 查找client目录下的引擎
     - 对于每一个测试用例，调用子进程，跑当前测试用例
     - 收集测试结果
     - 生成报告，报告的通知方式，微信/WP，生成txt/json数据

   - Slave

     输入：client路径，test路径，testcase

     - 先执行assert重写相关的模块
     - 设置路径到client
     - 执行测试文件
     - 格式化保存结果

模块：

1. 功能1和2：模块Test_Game_Framework
2. 功能3：模块Test_Game_MasterSlave



## 问题记录

1. 执行测试用例需要使用项目的引擎

   工具启动的引擎是项目的引擎or在内部拷贝client的引擎

2. 整体测试中主进程和子进程的交互方式（文本报告/lua表）

3. 整体测试的输出是什么（子进程的检查明细的形式）

4. 对于报错的子进程的处理

5. testcase的组织方式

6. Jenkins通知方式，微信机器人，生成txt；WP生成json数据



### Q3

testAll的输出

1. 是否要保存每个测试用例的测试跟踪txt
2. 通过的标准是什么（对于报错的、崩溃的、其中没有assert语句的怎么处理）
3. 